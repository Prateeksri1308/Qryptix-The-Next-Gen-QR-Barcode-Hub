<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Qryptix ‚Äî Studio</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <link rel="manifest" href="/assets/manifest-CinIIFPf.json">
  <meta name="theme-color" content="#000000"/>
  <link rel="icon" type="png" href="/assets/favicon-32x32-BAhuRe-e.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon-JACmv-bP.png" />
  <link rel="manifest" href="/manifest.webmanifest">
<meta name="theme-color" content="#0D6EFD" />

  <style>
    #qrcode canvas, #qrcode img { max-width: 100%; height: auto; }
    #qrcode { text-align:center; position: relative; display:inline-block; }
    #qrcode .logo {
      position:absolute; top:50%; left:50%;
      transform:translate(-50%,-50%);
      max-width:30%; max-height:30%;
      border-radius:12px;
    }
    .bg-preview {
      display:flex; justify-content:center; align-items:center;
      padding:20px; border-radius:16px; min-height:280px;
    }
    .pattern-grid {
      background-image:linear-gradient(45deg,#ddd 25%,transparent 25%),
                       linear-gradient(-45deg,#ddd 25%,transparent 25%),
                       linear-gradient(45deg,transparent 75%,#ddd 75%),
                       linear-gradient(-45deg,transparent 75%,#ddd 75%);
      background-size:20px 20px;
    }
    .gradient-bg {
      background:linear-gradient(135deg,#a18cd1,#fbc2eb);
    }
  </style>
  <script type="module" crossorigin src="/assets/theme-DJykUiDu.js"></script>
  <link rel="stylesheet" crossorigin href="/assets/theme-Dq2tBcXV.css">
<link rel="manifest" href="/manifest.webmanifest"><script id="vite-plugin-pwa:register-sw" src="/registerSW.js"></script></head>
<body>
  <!-- Futuristic Loader -->
  <div id="page-loader">
    <div class="loader-container">
      <div class="logo-spin"><img src="data:image/png;base64,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" alt="Logo" /></div>
      <div class="dots"><span></span><span></span><span></span></div>
      <div class="status-text"><span id="loader-text">Loading...</span></div>
      <div class="progress-bar"><div class="progress-fill"></div></div>
    </div>
  </div>

  <!-- HEADER -->
  <header class="header">
    <nav class="nav container">
      <div class="brand"><div class="brand-logo"></div><span>Qryptix</span></div>
      <div class="nav-links desktop-only">
        <a data-softnav href="index.html"   class="btn sm">Home</a>
        <a data-softnav href="scanner.html" class="btn sm">Scanner</a>
        <a data-softnav href="cube.html"    class="btn sm">3D</a>
        <button class="btn icon" data-theme-toggle title="Toggle theme">üåì</button>
      </div>
      <button class="hamburger"><span></span><span></span><span></span></button>
    </nav>
  </header>
  <div class="drawer-backdrop"></div>
    <aside class="mobile-drawer">
  <div class="drawer-head">
    <div class="brand"><div class="brand-logo"></div>Qryptix</div>
    <button class="close-btn">&times;</button>
  </div>

  <nav class="nav-links" style="flex-direction:column;gap:12px;flex:1;display:flex;">
    <div class="drawer-top" style="display:flex;flex-direction:column;gap:12px;">
      <a data-softnav href="index.html" class="btn sm">Home</a>
      <a data-softnav href="scanner.html" class="btn sm">Scanner</a>
      <a data-softnav href="cube.html" class="btn sm">3D</a>
    <a id="download-btn" href="app-release-signed.apk" class="btn animated-btn primary-btn" download target="_blank" rel="noopener noreferrer">Download APK ‚¨áÔ∏è</a>
        <button class="btn icon" data-theme-toggle>üåì</button>
    </div>

    <div class="drawer-bottom">
      <a href="https://github.com/Prateeksri1308/" target="_blank" class="btn sm ghost drawer-btn github">GitHub</a>
      <a href="https://www.linkedin.com/in/prateek-srivastava-backend/" target="_blank" class="btn sm ghost drawer-btn linkedin">LinkedIn</a>
    </div>
  </nav>
</aside>

  <!-- MAIN -->
  <main class="container section">
    <section class="card hero">
      <span class="badge">üé® Studio</span>
      <h1 class="h1">Advanced QR Customizer</h1>
      <p class="p-muted">Logos, backgrounds, gradients, patterns, full export.</p>
    </section>

    <section class="card" style="margin-top:18px">
      <h2>Customize</h2>
      <label for="qrText">Text or URL</label>
      <input id="qrText" class="input" placeholder="Enter text or URL">

      <div class="grid" style="grid-template-columns:1fr 1fr;gap:12px;margin-top:10px">
        <div>
          <label for="qrColor">Foreground</label>
          <input id="qrColor" type="color" class="input" value="#000000">
        </div>
        <div>
          <label for="bgColor">Background</label>
          <input id="bgColor" type="color" class="input" value="#ffffff">
        </div>
      </div>

      <div class="grid" style="grid-template-columns:repeat(2,1fr);gap:12px;margin-top:10px">
        <div>
          <label for="qrSize">Size (%)</label>
          <input id="qrSize" type="range" min="20" max="100" value="30" class="input">
        </div>
        <div>
          <label for="errLevel">Error level</label>
          <select id="errLevel" class="input">
            <option value="L">Low</option>
            <option value="M">Medium</option>
            <option value="Q">Quartile</option>
            <option value="H" selected>High</option>
          </select>
        </div>
      </div>

      <div class="grid" style="grid-template-columns:1fr 1fr;gap:12px;margin-top:10px">
        <div>
          <label for="margin">Margin</label>
          <input id="margin" type="range" min="0" max="20" value="4" class="input">
        </div>
        <div>
          <label for="logoUpload">Upload Logo</label>
          <input id="logoUpload" type="file" accept="image/*" class="input">
        </div>
      </div>

      <div style="margin-top:10px">
        <label for="bgLayout">Background Layout</label>
        <select id="bgLayout" class="input">
          <option value="none">Plain</option>
          <option value="gradient" selected>Gradient</option>
          <option value="pattern">Pattern</option>
          <option value="image">Custom Image</option>
        </select>
        <input id="bgImage" type="file" accept="image/*" class="input" style="margin-top:6px;display:none">
      </div>
    </section>

    <section class="card" style="margin-top:18px">
      <h2>Preview</h2>
      <div id="previewWrapper" class="bg-preview">
        <div id="qrcode"></div>
      </div>
      <p id="qrInfo" class="p-muted"></p>
      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
        <button id="downloadPng" class="btn primary">Download PNG</button>
        <button id="downloadSvg" class="btn ghost">Download SVG</button>
        <button id="downloadPdf" class="btn ghost">Download PDF</button>
      </div>
    </section>
    <a id="download-btn" href="app-release-signed.apk" class="floating-apk-btn" download target="_blank" rel="noopener noreferrer">
  üì± Get App
</a>
  </main>

  <footer class="footer">Made with ‚ù§Ô∏è by <strong>Prateek</strong></footer>

  <!-- LOGIC -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
       const floatBtn = document.querySelector(".floating-apk-btn");

window.addEventListener("scroll", () => {
  if (window.scrollY === 0) {
    // At top ‚Üí show button
    floatBtn.style.opacity = "1";
    floatBtn.style.pointerEvents = "auto";
  } else {
    // Scrolled down ‚Üí hide button
    floatBtn.style.opacity = "0";
    floatBtn.style.pointerEvents = "none";
  }
});
    const levelMap = v => ({L:QRCode.CorrectLevel.L,M:QRCode.CorrectLevel.M,Q:QRCode.CorrectLevel.Q,H:QRCode.CorrectLevel.H}[v]||QRCode.CorrectLevel.H);
    const $ = id => document.getElementById(id);

    let logoData = "";
    let bgImgData = "";

    function generate(){
      const text = $("qrText").value || "https://example.com";
      const fg   = $("qrColor").value;
      const bg   = $("bgColor").value;
      const pct  = parseInt($("qrSize").value||70,10);
      const size = Math.floor(window.innerWidth * (pct/100));
      const lvl  = levelMap($("errLevel").value);
      const margin = parseInt($("margin").value||4,10);

      const wrap = $("qrcode");
      wrap.innerHTML = "";

      new QRCode(wrap, { 
        text, width:size, height:size, 
        colorDark:fg, colorLight:bg, 
        correctLevel:lvl, margin
      });

      if(logoData){
        const img = document.createElement("img");
        img.src = logoData;
        img.className = "logo";
        wrap.appendChild(img);
      }

      // Save to global
      QRPRO?.saveLastQRText?.(text);
      setTimeout(()=>{
        const node = wrap.querySelector("canvas")||wrap.querySelector("img");
        if(node){
          const data=node.toDataURL?node.toDataURL("image/png"):node.src;
          QRPRO?.saveLastQRPng?.(data);
        }
      },60);

      $("qrInfo").textContent = text.startsWith("http") ? "üîó Link detected" : "‚ÑπÔ∏è Plain text";

      // Background preview
      const bgWrap = $("previewWrapper");
      bgWrap.className = "bg-preview";
      const layout = $("bgLayout").value;
      if(layout==="gradient") bgWrap.classList.add("gradient-bg");
      if(layout==="pattern")  bgWrap.classList.add("pattern-grid");
      if(layout==="image" && bgImgData){
        bgWrap.style.backgroundImage=`url(${bgImgData})`;
        bgWrap.style.backgroundSize="cover";
      } else {
        bgWrap.style.backgroundImage="";
      }
    }

    // Events
    ["qrText","qrColor","bgColor","qrSize","errLevel","margin","bgLayout"].forEach(id=>{
      $(id).addEventListener("input", generate);
      $(id).addEventListener("change", generate);
    });

    $("logoUpload").addEventListener("change", e=>{
      const file=e.target.files[0];
      if(!file) return;
      const reader=new FileReader();
      reader.onload=ev=>{ logoData=ev.target.result; generate(); };
      reader.readAsDataURL(file);
    });

    $("bgLayout").addEventListener("change", e=>{
      $("bgImage").style.display = e.target.value==="image"?"block":"none";
      generate();
    });
    $("bgImage").addEventListener("change", e=>{
      const file=e.target.files[0];
      if(!file) return;
      const reader=new FileReader();
      reader.onload=ev=>{ bgImgData=ev.target.result; generate(); };
      reader.readAsDataURL(file);
    });

    // Downloads
    $("downloadPng").addEventListener("click",()=>{
      const node=document.querySelector("#qrcode canvas")||document.querySelector("#qrcode img");
      if(!node) return;
      const href=node.toDataURL?node.toDataURL("image/png"):node.src;
      Object.assign(document.createElement("a"),{href,download:"qrcode.png"}).click();
    });
    $("downloadSvg").addEventListener("click",()=>{
      const svg=`<svg xmlns="http://www.w3.org/2000/svg" width="256" height="256"><foreignObject width="100%" height="100%">${document.querySelector("#qrcode").innerHTML}</foreignObject></svg>`;
      const blob=new Blob([svg],{type:"image/svg+xml"});
      Object.assign(document.createElement("a"),{href:URL.createObjectURL(blob),download:"qrcode.svg"}).click();
    });
    $("downloadPdf").addEventListener("click",()=>{
      const { jsPDF } = window.jspdf;
      const doc=new jsPDF();
      const node=document.querySelector("#qrcode canvas");
      if(node){
        const img=node.toDataURL("image/png");
        doc.addImage(img,"PNG",20,20,160,160);
        doc.save("qrcode.pdf");
      }
    });

    // üîë Init ‚Äî prefer QR from index if available
window.addEventListener("DOMContentLoaded", ()=>{
  const lastText = QRPRO?.getLastQRText?.();
  const lastPng  = QRPRO?.getLastQRPng?.();

  // ‚úÖ Always default to gradient background
  $("bgLayout").value = "gradient";

  if(lastText){
    $("qrText").value = lastText;
  }

  if(lastPng){
    $("qrcode").innerHTML = `<img src="${lastPng}" alt="Last QR"/>`;
    $("qrInfo").textContent = lastText && lastText.startsWith("http")
      ? "üîó Link detected" : "‚ÑπÔ∏è Plain text";

    // also apply gradient background when showing last QR
    $("previewWrapper").classList.add("gradient-bg");
  } else {
    generate();
  }
});
  </script>
</body>
</html>
